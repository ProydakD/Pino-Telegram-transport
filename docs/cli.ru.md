# Руководство По CLI

Русская версия · [English version](cli.en.md)

Поставляемая утилита командной строки помогает заранее проверить доступ к Telegram и сгенерировать готовые фрагменты конфигурации для проектов на Pino.

## Установите Утилиту

- Установите пакет глобально: выполните `npm install -g pino-telegram-logger-transport`.
- Запустите одноразово через `npx pino-telegram-cli --help` внутри проекта.

## Проверьте Учетные Данные

- Запустите `pino-telegram-cli check --token <token>`, чтобы убедиться, что Telegram принимает токен.
- Добавьте `--chat-id <id>` (несколько значений разделяйте запятой), чтобы проверить доступ к каждому чату.
- Укажите `--thread-id <id>` вместе с единственным чатом, чтобы подтвердить доступность темы форума.
- Утилита отправит беззвучный пробный пост в тему (сообщение сразу удаляется), чтобы убедиться в доступе.
- Опустите явные флаги, если переменные `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID` и `TELEGRAM_THREAD_ID` заданы в окружении.
- Ожидайте ненулевой код возврата при отказе Telegram или ошибке проверки.

### Пример

```bash
pino-telegram-cli check --token 123:ABC --chat-id -1001234567890
```

## Сгенерируйте Конфигурацию

- Получите JSON-фрагмент командой `pino-telegram-cli generate-config --token <token> --chat-id <id>`.
- Выберите формат `.env` через `--format env`, чтобы дополнить файл окружения.
- Укажите `--output путь/к/файлу`, чтобы записать результат вместо вывода в консоль.
- Перечислите несколько получателей через запятую, чтобы в JSON появилась коллекция чатов.
- Заполните плейсхолдеры заранее, экспортировав `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID` или `TELEGRAM_THREAD_ID`.

### Пример

```bash
pino-telegram-cli generate-config --token 123:ABC --chat-id -1001234567890 --format env --output .env.telegram
```

## Коды Возврата

- 0: все проверки прошли успешно или конфигурация сформирована.
- 1: некорректные аргументы, отказ Telegram или ошибка записи файла.
